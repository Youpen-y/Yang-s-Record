Read-Copy-Update （RCU）是一种同步机制，当多个线程同时读取和更新通过指针链接的共享数据结构（如，链表、树、哈希表）的元素时，避免使用锁原语。
当一个线程在共享内存中插入或删除数据结构的元素时，所有读者都保证可以看到并遍历旧的或新的结构，从而避免不一致（如，取消引用空指针）。
当读取性能（the performance of reads）很重要时使用，RCU以更多空间为代价实现快速操作。这使得所有读者（readers）都可以继续进行，好像没有涉及同步一样，因此读取操作很快，但同样会导致更新（updates）更加困难。

---
RCU用于就地更新链接结构，希望执行此操作的线程使用如下步骤：
- 创建一个新的结构（structure）
- 将数据从旧结构复制到新结构中，并保存指向旧结构的指针
- 修改新的、复制的结构
- 更新全局指针以引用新结构
- 睡眠（sleep）直到操作系统内核确定没有读者使用旧结构，如，在 Linux 内核中，会使用 `synchronize_rcu()`
- 一旦被内核唤醒，就释放旧的结构
因此，该结构在线程拷贝其以便进行更新的同时被读取。

RCU的一个关键属性是，即使数据结构正在更新过程中，读者（reader）仍可以访问该数据结构：即 RCU updater 不能阻止或强制 reader 重试访问。



https://lwn.net/Articles/262464/
https://lwn.net/Articles/263130/
https://lwn.net/Articles/264090/






